{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst input = document.querySelector('#datetime-picker');\nconst btn = document.querySelector('button[data-start]');\nconst daysValue = document.querySelector('.value[data-days]');\nconst hoursValue = document.querySelector('span[data-hours]');\nconst minutesValue = document.querySelector('span[data-minutes]');\nconst secondsValue = document.querySelector('span[data-seconds]');\n\ndocument.addEventListener('DOMContentLoaded', () => (btn.disabled = true));\nbtn.addEventListener('click', handleStartClick);\n\nlet timeToStop;\nlet userSelectedDate;\nlet intervalId;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    timeToStop = selectedDates[0] - new Date();\n\n    if (selectedDates[0] - new Date() < 0) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n        messageColor: 'white',\n        backgroundColor: 'red',\n        transitionIn: 'fadeIn',\n        timeout: 3500,\n      });\n      btn.disabled = true;\n      return;\n    }\n    userSelectedDate = selectedDates[0];\n    btn.disabled = false;\n  },\n};\n\nflatpickr(input, options);\n\nfunction handleStartClick(e) {\n  input.disabled = true;\n  btn.disabled = true;\n  updateTimerface(convertMs(timeToStop));\n\n  intervalId = setInterval(() => {\n    const currentTime = Date.now();\n    let deltaTime = userSelectedDate - currentTime;\n    const time = convertMs(deltaTime);\n\n    if (deltaTime <= 999) {\n      clearInterval(intervalId);\n      input.disabled = false;\n    }\n    updateTimerface(time);\n  }, 1000);\n}\n\nfunction updateTimerface({ days, hours, minutes, seconds }) {\n  daysValue.textContent = addLeadingZero(days);\n  hoursValue.textContent = addLeadingZero(hours);\n  minutesValue.textContent = addLeadingZero(minutes);\n  secondsValue.textContent = addLeadingZero(seconds);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["input","btn","daysValue","hoursValue","minutesValue","secondsValue","handleStartClick","timeToStop","userSelectedDate","intervalId","options","selectedDates","iziToast","flatpickr","e","updateTimerface","convertMs","currentTime","deltaTime","time","days","hours","minutes","seconds","addLeadingZero","ms","value"],"mappings":"iyBAKA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAM,SAAS,cAAc,oBAAoB,EACjDC,EAAY,SAAS,cAAc,mBAAmB,EACtDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAEhE,SAAS,iBAAiB,mBAAoB,IAAOJ,EAAI,SAAW,EAAK,EACzEA,EAAI,iBAAiB,QAASK,CAAgB,EAE9C,IAAIC,EACAC,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAIrB,GAHA,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5BJ,EAAaI,EAAc,CAAC,EAAI,IAAI,KAEhCA,EAAc,CAAC,EAAI,IAAI,KAAS,EAAG,CACrCC,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,WACV,aAAc,QACd,gBAAiB,MACjB,aAAc,SACd,QAAS,IACjB,CAAO,EACDX,EAAI,SAAW,GACf,MACD,CACDO,EAAmBG,EAAc,CAAC,EAClCV,EAAI,SAAW,EAChB,CACH,EAEAY,EAAUb,EAAOU,CAAO,EAExB,SAASJ,EAAiBQ,EAAG,CAC3Bd,EAAM,SAAW,GACjBC,EAAI,SAAW,GACfc,EAAgBC,EAAUT,CAAU,CAAC,EAErCE,EAAa,YAAY,IAAM,CAC7B,MAAMQ,EAAc,KAAK,MACzB,IAAIC,EAAYV,EAAmBS,EACnC,MAAME,EAAOH,EAAUE,CAAS,EAE5BA,GAAa,MACf,cAAcT,CAAU,EACxBT,EAAM,SAAW,IAEnBe,EAAgBI,CAAI,CACrB,EAAE,GAAI,CACT,CAEA,SAASJ,EAAgB,CAAE,KAAAK,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1DrB,EAAU,YAAcsB,EAAeJ,CAAI,EAC3CjB,EAAW,YAAcqB,EAAeH,CAAK,EAC7CjB,EAAa,YAAcoB,EAAeF,CAAO,EACjDjB,EAAa,YAAcmB,EAAeD,CAAO,CACnD,CAEA,SAASP,EAAUS,EAAI,CAQrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAE1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EAEpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EAEjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeE,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}